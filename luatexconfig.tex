% tex-ini-files 2016-04-14: luatexconfig.tex

% Load shared (PDF) settings in LuaTeX

\begingroup
  \catcode`\{=1 %
  \catcode`\}=2 %
  \catcode`\#=6 %
  \def\list{%
      {compresslevel}%
      {decimaldigits}%
      {horigin}%
      {minorversion}%
      {objcompresslevel}%
      {pkresolution}%
      {vorigin}%
  }%
  \def\do#1{%
    \ifx\relax#1\else
      \directlua{tex.enableprimitives("", {"pdf#1"})}%
      \expandafter\do
    \fi
  }%
  \expandafter\do\list{output}{pageheight}{pagewidth}{variable}\relax
  \directlua{tex.enableprimitives("",
    {"pageheight", "pagewidth", "outputmode"})}%
  \ifx\pdfoutput\undefined
    \global\let\pdfoutput\outputmode
    \global\let\pdfpageheight\pageheight
    \global\let\pdfpagewidth\pagewidth
    \def\do#1{%
      \ifx\relax#1\else
        \expandafter\xdef\csname pdf#1\endcsname{\pdfvariable #1}%
        \expandafter\do
      \fi
    }%
    \expandafter\do\list\relax
  \fi
  \globaldefs=1 %
  \input{pdftexconfig}%
  \globaldefs=0 %
  \ifx\dvimode\relax
    \global\pdfoutput=0 %
  \fi
  \global\let\dvimode\undefined
  \def\do#1{%
    \ifx\relax#1\else
      \global\expandafter\let\csname pdf#1\endcsname\undefined
      \expandafter\do
    \fi
  }%
  \expandafter\do\list\relax
  \global\let\outputmode\undefined
  \global\let\pageheight\undefined
  \global\let\pagewidth\undefined
  \global\let\pdfvariable\undefined
  \global\let\dvimode\undefined
\endgroup